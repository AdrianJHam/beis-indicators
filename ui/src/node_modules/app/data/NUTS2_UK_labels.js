import * as _ from 'lamb';

import NUTS_2003 from '@svizzle/atlas/distro/NUTS_2003.csv';
import NUTS_2006 from '@svizzle/atlas/distro/NUTS_2006.csv';
import NUTS_2010 from '@svizzle/atlas/distro/NUTS_2010.csv';
import NUTS_2013 from '@svizzle/atlas/distro/NUTS_2013.csv';
import NUTS_2016 from '@svizzle/atlas/distro/NUTS_2016.csv';

const makeLabelById = _.pipe([
	_.filterWith(_.allOf([
		obj => obj.CNTR_CODE === 'UK',
		obj => obj.NUTS_ID.length === 4,
	])),
	_.indexBy(_.getKey('NUTS_ID')),
	_.mapValuesWith(_.getKey('NUTS_NAME')),
]);

const map = _.mapValues({
	2003: NUTS_2003,
	2006: NUTS_2006,
	2010: NUTS_2010,
	2013: NUTS_2013,
	2016: NUTS_2016,
}, makeLabelById);

export default map;
