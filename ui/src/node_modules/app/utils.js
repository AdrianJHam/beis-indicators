import * as _ from 'lamb';
import {
  arrayMin,
  arrayMax,
  makeArrayTransformer
} from '@svizzle/utils';

/* svizzle */

export const inclusiveRange =
  (extent, step = 1) => _.range(extent[0], extent[1] + step, step);

/* domain */

export const getYearExtent = _.pipe([
  _.pluckKey('indicators'),
  _.flatten,
  _.pluckKey('year_range'),
  _.transpose,
  makeArrayTransformer([arrayMin, arrayMax]),
]);

export const makeIndicatorsLookup = _.pipe([
  _.pluckKey('indicators'),
  _.flatten,
  _.indexBy(_.getPath('schema.value.id')),
]);
